import{s as X,n as N,e as S,a as Z,b as $,r as G}from"../chunks/scheduler.DrQ3Y8r4.js";import{S as J,i as K,e as F,a as T,f as b,g as w,m as L,s as M,h as I,j as y,n as j,c as D,k as m,z as g,o as P,t as V,b as Q,d as B,p as Y,y as H,A as U,B as C,C as ee,D as te,r as se,u as le,v as ne,w as re}from"../chunks/index.AIXbFlbz.js";import{w as ae}from"../chunks/firestore.GgQuWzsN.js";import{authState as ie}from"../chunks/auth.fkv4ZrZy.js";function z(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function O(l){return l.charAt(0).toUpperCase()+l.slice(1)}function q(l){let t,e,s=O(l[0].userName.split("@")[0])+"",n,i,a,f,u=l[0].content+"",c,v;return{c(){t=w("div"),e=w("div"),n=L(s),a=M(),f=w("div"),c=L(u),this.h()},l(_){t=I(_,"DIV",{class:!0});var p=y(t);e=I(p,"DIV",{class:!0});var r=y(e);n=j(r,s),r.forEach(b),a=D(p),f=I(p,"DIV",{class:!0});var k=y(f);c=j(k,u),k.forEach(b),p.forEach(b),this.h()},h(){m(e,"class",i="text-white "+(l[0].userid===l[1].uid?" ml-auto":"")),m(f,"class",v="max-w-md px-4 py-2 rounded-2xl my-2 "+(l[0].userid===l[1].uid?"bg-vintageBeige ml-auto":"bg-white")),m(t,"class","flex flex-col items-start whitespace-break-spaces break-all")},m(_,p){T(_,t,p),g(t,e),g(e,n),g(t,a),g(t,f),g(f,c)},p(_,p){p&1&&s!==(s=O(_[0].userName.split("@")[0])+"")&&P(n,s),p&3&&i!==(i="text-white "+(_[0].userid===_[1].uid?" ml-auto":""))&&m(e,"class",i),p&1&&u!==(u=_[0].content+"")&&P(c,u),p&3&&v!==(v="max-w-md px-4 py-2 rounded-2xl my-2 "+(_[0].userid===_[1].uid?"bg-vintageBeige ml-auto":"bg-white"))&&m(f,"class",v)},d(_){_&&b(t)}}}function oe(l){let t,e=l[1]!==null&&q(l);return{c(){e&&e.c(),t=F()},l(s){e&&e.l(s),t=F()},m(s,n){e&&e.m(s,n),T(s,t,n)},p(s,[n]){s[1]!==null?e?e.p(s,n):(e=q(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:N,o:N,d(s){s&&b(t),e&&e.d(s)}}}function ue(l,t,e){let s;S(l,ae,i=>e(1,s=i));let{message:n}=t;return l.$$set=i=>{"message"in i&&e(0,n=i.message)},[n,s]}class ce extends J{constructor(t){super(),K(this,t,ue,oe,X,{message:0})}}function R(l,t,e){const s=l.slice();return s[18]=t[e],s}function fe(l){let t,e,s,n,i,a,f,u="Send",c,v,_,p=z(l[1].reverse()),r=[];for(let o=0;o<p.length;o+=1)r[o]=W(R(l,p,o));const k=o=>V(r[o],1,1,()=>{r[o]=null});return{c(){t=w("main"),e=w("div");for(let o=0;o<r.length;o+=1)r[o].c();s=M(),n=w("form"),i=w("textarea"),a=M(),f=w("button"),f.textContent=u,this.h()},l(o){t=I(o,"MAIN",{class:!0});var h=y(t);e=I(h,"DIV",{class:!0});var d=y(e);for(let A=0;A<r.length;A+=1)r[A].l(d);d.forEach(b),s=D(h),n=I(h,"FORM",{class:!0});var x=y(n);i=I(x,"TEXTAREA",{class:!0}),y(i).forEach(b),a=D(x),f=I(x,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(f)!=="svelte-qwuyvn"&&(f.textContent=u),x.forEach(b),h.forEach(b),this.h()},h(){m(e,"class","flex-auto overflow-scroll"),m(i,"class","flex-1 resize-none"),m(f,"type","submit"),m(f,"class","ml-4 bg-vintageBeige rounded-md p-3"),m(n,"class","bg-vintageNavy p-3 flex"),m(t,"class","flex flex-1 flex-col overflow-scroll")},m(o,h){T(o,t,h),g(t,e);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);l[15](e),g(t,s),g(t,n),g(n,i),U(i,l[5]),g(n,a),g(n,f),c=!0,v||(_=[C(i,"input",l[16]),C(n,"submit",ee(l[11]))],v=!0)},p(o,h){if(h&2){p=z(o[1].reverse());let d;for(d=0;d<p.length;d+=1){const x=R(o,p,d);r[d]?(r[d].p(x,h),B(r[d],1)):(r[d]=W(x),r[d].c(),B(r[d],1),r[d].m(e,null))}for(Y(),d=p.length;d<r.length;d+=1)k(d);Q()}h&32&&U(i,o[5])},i(o){if(!c){for(let h=0;h<p.length;h+=1)B(r[h]);c=!0}},o(o){r=r.filter(Boolean);for(let h=0;h<r.length;h+=1)V(r[h]);c=!1},d(o){o&&b(t),te(r,o),l[15](null),v=!1,G(_)}}}function de(l){let t,e="<span>Loading User Data...</span>";return{c(){t=w("main"),t.innerHTML=e,this.h()},l(s){t=I(s,"MAIN",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1l7f9th"&&(t.innerHTML=e),this.h()},h(){m(t,"class","center")},m(s,n){T(s,t,n)},p:N,i:N,o:N,d(s){s&&b(t)}}}function he(l){let t,e,s,n,i,a,f,u,c,v,_,p;return{c(){t=w("main"),e=w("div"),s=w("div"),n=w("input"),i=M(),a=w("input"),f=M(),u=w("div"),c=w("button"),v=L("LogIn"),this.h()},l(r){t=I(r,"MAIN",{class:!0});var k=y(t);e=I(k,"DIV",{class:!0});var o=y(e);s=I(o,"DIV",{class:!0});var h=y(s);n=I(h,"INPUT",{class:!0,type:!0,placeholder:!0}),i=D(h),a=I(h,"INPUT",{class:!0,type:!0,placeholder:!0}),h.forEach(b),f=D(o),u=I(o,"DIV",{class:!0});var d=y(u);c=I(d,"BUTTON",{class:!0});var x=y(c);v=j(x,"LogIn"),x.forEach(b),d.forEach(b),o.forEach(b),k.forEach(b),this.h()},h(){m(n,"class","px-2 box-border rounded-md h-8 border-2 border-vintageBeige border-solid"),m(n,"type","email"),m(n,"placeholder","Email"),m(a,"class","px-2 box-border rounded-md h-8 border-2 border-vintageBeige border-solid"),m(a,"type","password"),m(a,"placeholder","Password"),m(s,"class","flex flex-col space-y-4"),m(c,"class","p-2 rounded-md hover:text-vintageBeige active:opacity-80 text-white"),c.disabled=_e,m(u,"class","flex space-x-4 justify-end"),m(e,"class","flex flex-col p-4 backdrop-blur-lg w-1/3 h-1/3 min-w-80 justify-between shadow-lg"),m(t,"class","flex justify-center items-center h-full w-full")},m(r,k){T(r,t,k),g(t,e),g(e,s),g(s,n),U(n,l[2]),g(s,i),g(s,a),U(a,l[3]),g(e,f),g(e,u),g(u,c),g(c,v),_||(p=[C(n,"input",l[13]),C(a,"input",l[14]),C(c,"click",l[10])],_=!0)},p(r,k){k&4&&n.value!==r[2]&&U(n,r[2]),k&8&&a.value!==r[3]&&U(a,r[3])},i:N,o:N,d(r){r&&b(t),_=!1,G(p)}}}function me(l){let t,e='<div class="flex h-1/3 min-w-80 animate-bounce bg-vintageNavy text-vintageBeige justify-center items-center">Work in progress</div>';return{c(){t=w("main"),t.innerHTML=e,this.h()},l(s){t=I(s,"MAIN",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-itmvf1"&&(t.innerHTML=e),this.h()},h(){m(t,"class","flex justify-center items-center h-full w-full")},m(s,n){T(s,t,n)},p:N,i:N,o:N,d(s){s&&b(t)}}}function W(l){let t,e,s,n;return e=new ce({props:{message:l[18]}}),{c(){t=w("div"),se(e.$$.fragment),s=M(),this.h()},l(i){t=I(i,"DIV",{class:!0});var a=y(t);le(e.$$.fragment,a),s=D(a),a.forEach(b),this.h()},h(){m(t,"class","px-4")},m(i,a){T(i,t,a),ne(e,t,null),g(t,s),n=!0},p(i,a){const f={};a&2&&(f.message=i[18]),e.$set(f)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){V(e.$$.fragment,i),n=!1},d(i){i&&b(t),re(e)}}}function pe(l){let t,e,s,n;const i=[me,he,de,fe],a=[];function f(u,c){return u[4]?0:u[6]==null?1:u[7]===null?2:3}return t=f(l),e=a[t]=i[t](l),{c(){e.c(),s=F()},l(u){e.l(u),s=F()},m(u,c){a[t].m(u,c),T(u,s,c),n=!0},p(u,[c]){let v=t;t=f(u),t===v?a[t].p(u,c):(Y(),V(a[v],1,1,()=>{a[v]=null}),Q(),e=a[t],e?e.p(u,c):(e=a[t]=i[t](u),e.c()),B(e,1),e.m(s.parentNode,s))},i(u){n||(B(e),n=!0)},o(u){V(e),n=!1},d(u){u&&b(s),a[t].d(u)}}}let _e=!1;function ve(l,t,e){let s,n,i;S(l,ie,E=>e(6,n=E));let{data:a}=t,f=a.firestore.currentFirestoreUser;S(l,f,E=>e(7,i=E));let u=a.firestore.messagesState;S(l,u,E=>e(1,s=E));let c="",v="",_=!1;async function p(){if(c=="test"){e(4,_=!0);return}await a.auth.signIn(c,v)}let r="";function k(){r!==""&&(a.firestore.sendMessage(r),e(5,r=""))}let o;Z(()=>{o!=null&&o.scroll({top:o.scrollHeight,behavior:"smooth"})});function h(){c=this.value,e(2,c)}function d(){v=this.value,e(3,v)}function x(E){$[E?"unshift":"push"](()=>{o=E,e(0,o)})}function A(){r=this.value,e(5,r)}return l.$$set=E=>{"data"in E&&e(12,a=E.data)},l.$$.update=()=>{l.$$.dirty&3&&s&&o!=null&&(console.log(o),o.scroll({top:o.scrollHeight,behavior:"smooth"}))},[o,s,c,v,_,r,n,i,f,u,p,k,a,h,d,x,A]}class ke extends J{constructor(t){super(),K(this,t,ve,pe,X,{data:12})}}export{ke as component};
